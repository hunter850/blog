---
category: frontend
tags:
    - Next.js
    - i18n
    - next-intl
title: Integrating next-intl in Next.js App Router for Multilingual Support
description: This article introduces how to implement multilingual support in Next.js App Router projects using next-intl, including installation, configuration, and basic usage.
language: en-US
date: 2025-02-28T12:22:00Z
---

## Introduction

Since version 13, Next.js has introduced the App Router, and we can implement comprehensive multilingual functionality, including route and content translation, by using the powerful `next-intl` library.

This article will detail how to set up `next-intl` in a Next.js App Router project to create multilingual websites based on path prefixes (such as `/en-US/about`).

## Why Choose next-intl

+ Supports client components, server components, and asynchronous server components
+ Offers more concise setup compared to other internationalization libraries
+ Provides APIs and components consistent with Next.js usage when switching routes

## Setting up next-intl in Next.js App Router

If you haven't created a Next.js project yet, first create one using App Router by referring to the Next.js [official documentation](https://nextjs.org/docs/app/getting-started/installation).

### 1. Install next-intl

```bash
npm install next-intl
```

### 2. File Structure

```plaintext
├── messages
│   ├── en-US.json
│   ├── zh-TW.json
│   └── ...
├── next.config.ts
└── src
    ├── i18n
    │   ├── routing.ts
    │   ├── navigation.ts
    │   └── request.ts
    ├── middleware.ts
    └── app
        └── [locale]
            ├── [...rest]
            │   └── page.tsx
            ├── layout.tsx
            ├── not-found.tsx
            └── page.tsx
```

※ If you're applying next-intl to an existing project, you'll need to move all existing pages to the `[locale]` folder.

※ If you're not using the `src` folder, then `i18n` and `middleware.ts` should be placed at the same level as the `app` folder.

### 3. Create Translation Files

In the `messages` folder at the project root, create JSON files for each language and add translation content:

```json title="messages/en-US.json"
{
  "HomePage": {
    "title": "Hello world!",
    "about": "Go to the about page"
  },
  "NotFoundPage": {
    "title": "404 Not Found",
    "description": "The page you are looking for does not exist."
  }
}
```

```json title="messages/zh-TW.json"
{
  "HomePage": {
    "title": "你好，世界！",
    "about": "前往關於頁面"
  },
  "NotFoundPage": {
    "title": "404 找不到頁面",
    "description": "您正在尋找的頁面不存在。"
  }
}
```

### 4. Configure next.config.ts

```typescript title="next.config.ts"
import createNextIntlPlugin from "next-intl/plugin";
import type { NextConfig } from "next";

const withNextIntl = createNextIntlPlugin();

const nextConfig: NextConfig = {};

export default withNextIntl(nextConfig);
```

### 5. Set Up Routing Configuration

Create a `src/i18n/routing.ts` file to define supported languages and the default language:

```typescript title="src/i18n/routing.ts"
import { defineRouting } from "next-intl/routing";

export const LOCALES = ["zh-TW", "en-US"] as const;
export const DEFAULT_LOCALE = "zh-TW" as const;

export const routing = defineRouting({
  // Supported languages
  locales: LOCALES,

  // Default language
  defaultLocale: DEFAULT_LOCALE,
});
```

### 6. Set Up Route Switching APIs and Components

Create a `src/i18n/navigation.ts` file to define APIs and components for route switching:

```typescript title="src/i18n/navigation.ts"
import { createNavigation } from "next-intl/navigation";
import {routing} from "./routing";

// APIs and components for route switching
export const { Link, redirect, usePathname, useRouter, getPathname } = createNavigation(routing);
``` 

### 7. Set Up Middleware

Create a `src/middleware.ts` file to handle page redirects:

```typescript title="src/middleware.ts"
import { NextRequest } from "next/server";
import createMiddleware from "next-intl/middleware";
import { routing } from "./i18n/routing";

export function middleware(request: NextRequest) {
  const handleI18nRouting = createMiddleware(routing);
  const response = handleI18nRouting(request);
  return response;
}

export const config = {
  // All routes except static resources, robots.txt, sitemap.xml, favicon.ico, and api will be processed by the middleware
  matcher: ["/((?!_next/static|robots.txt|sitemap.xml|favicon.ico|api).*)", "/", "/(zh-TW|en-US)/:path*"],
};
```

### 8. Handle Translation Loading Requests

Create a `src/i18n/request.ts` file for loading translations:

```typescript title="src/i18n/request.ts"
import { getRequestConfig } from "next-intl/server";
import { routing } from "./routing";

export default getRequestConfig(async ({ requestLocale }) => {
  let locale = await requestLocale;

  if (!locale || !routing.locales.includes(locale as any)) {
    locale = routing.defaultLocale;
  }

  return {
    locale,
    messages: (await import(`../../messages/${locale}.json`)).default,
  };
});
```

### 9. Set Up Layout

In the `src/app/[locale]/layout.tsx` file, add the `next-intl` provider:

```tsx title="src/app/[locale]/layout.tsx"
import { NextIntlClientProvider } from "next-intl";
import { getMessages } from "next-intl/server";
import { notFound } from "next/navigation";
import { routing } from "@/i18n/routing";
 
export default async function LocaleLayout({
  children,
  params
}: {
  children: React.ReactNode;
  params: Promise<{ locale: string }>;
}) {
  // Ensure the language is supported
  const { locale } = await params;
  if (!routing.locales.includes(locale as any)) {
    notFound();
  }

  // Get translation data
  const messages = await getMessages();

  return (
    <html lang={locale}>
      <body>
        <NextIntlClientProvider messages={messages}>
          {children}
        </NextIntlClientProvider>
      </body>
    </html>
  );
}
```

### 10. Create a Page to Test Translation Functionality

Create a `src/app/[locale]/page.tsx` file to test if useTranslations and the Link component work properly:

```tsx title="src/app/[locale]/page.tsx"
import { useTranslations } from "next-intl";
// Using next-intl's Link component will automatically handle locale prefixes
import { Link } from "@/i18n/navigation";
 
export default function HomePage() {
  const t = useTranslations("HomePage");
  return (
    <div>
      <h1>{t("title")}</h1>
      <Link href="/about">{t("about")}</Link>
    </div>
  );
}
```

## Common Applications

### 1. Using in Asynchronous Server Components

```tsx
import { getTranslations } from "next-intl/server";

export default async function Page() {
  const t = await getTranslations("HomePage");
  const response = await fetch("https://your-api-url.com/api/data");
  const data = await response.json();
  return (
    <div>
      <h1>{t("title")}</h1>
      <Link href="/about">{t("about")}</Link>
      <pre>{JSON.stringify(data, null, 2)}</pre>
    </div>
  );
}
```

### 2. Handling Not Found Pages

Create `src/app/[locale]/[...rest]/page.tsx` to redirect undefined routes to the not found page:

```tsx title="src/app/[locale]/[...rest]/page.tsx"
import { notFound } from "next/navigation";

export default function CatchAllPage() {
  notFound();
}
```

Create `src/app/[locale]/not-found.tsx` to edit your own Not Found page:

```tsx title="src/app/[locale]/not-found.tsx"
"use client";

import { useTranslations } from "next-intl";

export default function NotFoundPage() {
  const t = useTranslations("NotFoundPage");
  return (
    <div>
      <h1>{t("title")}</h1>
      <p>{t("description")}</p>
    </div>
  );
}
```

### 3. Language Switching

```tsx
"use client";

import { usePathname, Link } from "@/i18n/routing";
import { useLocale } from "next-intl";

const languages = [
  { locale: "zh-TW", name: "繁體中文" },
  { locale: "en-US", name: "English" },
];

function LanguageSwitcher() {
  const locale = useLocale();
  const pathname = usePathname();
  return (
    <>
      {languages.map((language) => {
        return (
          <Link
            href={pathname}
            locale={language.locale}
            key={language.locale}
          >
            {language.name}{locale === language.locale && "✓"}
          </Link>
        )
      })}
    </>
  );
}

export default function Page() {
  return (
    <div>
      <LanguageSwitcher />
    </div>
  )
}
```

### 4. Redirecting

```tsx
"use client";

import { redirect } from "@/i18n/navigation";

export default function Page() {
  redirect({ href: "/login", locale: "zh-TW" });
}
```

```tsx
"use client";

import { useRouter } from "@/i18n/navigation";

export default function Page() {
  const router = useRouter();
  return (
    <button onClick={() => router.push("/login", { locale: "zh-TW" })}>
      Login
    </button>
  )
}
```

## Conclusion

By following the steps above, you have successfully integrated `next-intl` into your Next.js App Router project, implementing comprehensive multilingual functionality. `next-intl` not only provides developers with a simple way to set up multilingual support but also offers APIs and components consistent with Next.js, eliminating the need to learn additional API and component usage for multilingual development.

## References

+ [next-intl Official Documentation](https://next-intl.dev/docs/getting-started/app-router)
